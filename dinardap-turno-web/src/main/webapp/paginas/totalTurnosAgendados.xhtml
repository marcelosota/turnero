<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/template/general.xhtml">
	<ui:define name="content">
		<h1 class="h-wai">#{etiquetas['nombre.sistema']} - Reporte - Turnos Agendados</h1>
		<h:form id="formInicio">
			<h:panelGrid columns="2" id="pnlRango" style="width:35%;"
				columnClasses="form-label-derecha, form-input-izquierda">
				<p:outputLabel value="#{etiquetas['rango.fechas']}*:" />
				<b:switch id="swtRango" value="#{totalTurnosAgendadosCtrl.flag}" 
						onText="Si" offText="No" onColor="success" offColor="info" 
						process="@this" update="dateFechaInicio, dateFechaFin" ajax="true" /> 
			</h:panelGrid>
			<h:panelGrid columns="5" id="pnlFechas" style="width:80%;"
				columnClasses="form-label-derecha ui-grid-col-1, form-input-izquierda, 
					form-label-derecha ui-grid-col-1, form-input-izquierda, form-input-izquierda">
                    <p:outputLabel value="#{etiquetas['nombre.fechaInicio']}*:" />
                    <p:datePicker id="dateFechaInicio"
                    	value="#{totalTurnosAgendadosCtrl.fechaDesde}"
                        mindate="#{totalTurnosAgendadosCtrl.minima}"
                        pattern="yyyy-MM-dd"
                        disabled="#{!totalTurnosAgendadosCtrl.flag}"  
                        required="true"
                        requiredMessage="#{etiquetas['nombre.fechaInicio']} #{mensajes['requerido']}">
                        <f:ajax event="dateSelect" listener="#{totalTurnosAgendadosCtrl.validarFecha}" 
                        	update="dateFechaFin dateFechaInicio" execute="dateFechaInicio"/>
                    </p:datePicker>
                    <p:outputLabel value="#{etiquetas['nombre.fechoFin']}*:" />
                    <p:datePicker id="dateFechaFin"
                    	value="#{totalTurnosAgendadosCtrl.fechaHasta}"
                        mindate="#{totalTurnosAgendadosCtrl.minimaF}"
                        pattern="yyyy-MM-dd"
                        disabled="#{!totalTurnosAgendadosCtrl.flag}"  
                        required="true"
                        requiredMessage="#{etiquetas['nombre.fechoFin']} #{mensajes['requerido']}">
                    </p:datePicker>
                    <p:commandButton id="btnBuscar" value="#{etiquetas['buscar']}" 
                    	actionListener="#{totalTurnosAgendadosCtrl.buscar}"
                    	update="dtbTurnosAgendados"/>
			</h:panelGrid>
			<p:dataTable id="dtbTurnosAgendados"
				value="#{totalTurnosAgendadosCtrl.turno}"
				var="t" paginator="true"
				rows="25" style="margin-bottom:20px"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {Exporters}">
				<f:facet name="{Exporters}">
	            	<div style="float:right;">
		                <h:commandLink>
		                    <p:graphicImage value="/resource/images/excel.png" width="24"/>
		                    <p:dataExporter type="xls" target="dtbTurnosAgendados" fileName="turnosAgendados" />
		                </h:commandLink>
		                <h:commandLink>
		                    <p:graphicImage value="/resource/images/pdf.png" width="24"/>
		                    <p:dataExporter type="pdf" target="dtbTurnosAgendados" fileName="turnosAgendados" preProcessor="#{totalTurnosAgendadosCtrl.preProcessPDF}"/>
		                </h:commandLink>
		                <h:commandLink>
		                    <p:graphicImage value="/resource/images/csv.png" width="24"/>
		                    <p:dataExporter type="csv" target="dtbTurnosAgendados" fileName="turnosAgendados" />
		                </h:commandLink>
					</div>
				</f:facet>
				<p:column headerText="#{etiquetas['registro.mercantil']}">
					<h:outputText value="#{t.institucion}"/>
				</p:column>
				<p:column headerText="#{etiquetas['cantidad']}">
					<h:outputText value="#{t.cantidad}"/>
				</p:column>
			</p:dataTable>
		</h:form>
	</ui:define>
</ui:composition>
</html>