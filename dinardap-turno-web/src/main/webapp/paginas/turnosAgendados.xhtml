<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/template/general.xhtml">
	<ui:define name="content">
		<h1 class="h-wai">#{etiquetas['nombre.sistema']} - Reporte - Turnos Agendados</h1>
		<h:form id="formInicio">
			<h:panelGrid columns="2" id="pnlInstitucion" style="width:80%;"
				columnClasses="form-label-derecha ui-grid-col-1, form-input-izquierda">
                    <p:outputLabel value="#{etiquetas['registro.mercantil']}*:" />
				<b:selectOneMenu id="cmbEntidades"
					value="#{turnosAgendadosCtrl.registroMercantilId}" 
					required="true"
					required-message="#{etiquetas['registro.mercantil']} #{mensajes['requerido']}"
					styleClass="form-combo-centrado">
					<f:selectItems value="#{turnosAgendadosCtrl.registroMercantil}"
						var="rm" 
						itemLabel="#{rm.nombre}"
						itemValue="#{rm.registroMercantilId}" />
				</b:selectOneMenu>
			</h:panelGrid>
			<h:panelGrid columns="5" id="pnlFechas" style="width:80%;"
				columnClasses="form-label-derecha ui-grid-col-1, form-input-izquierda, 
					form-label-derecha ui-grid-col-1, form-input-izquierda, form-input-izquierda">
                    <p:outputLabel value="#{etiquetas['nombre.fechaInicio']}*:" />
                    <p:datePicker id="dateFechaInicio"
                    	value="#{turnosAgendadosCtrl.fechaDesde}"
                        mindate="#{turnosAgendadosCtrl.minima}"
                        pattern="yyyy-MM-dd"  
                        required="true"
                        requiredMessage="#{etiquetas['nombre.fechaInicio']} #{mensajes['requerido']}">
                        <p:ajax event="dateSelect" update="dateFechaFin"/>
                    </p:datePicker>
                    <p:outputLabel value="#{etiquetas['nombre.fechoFin']}*:" />
                    <p:datePicker id="dateFechaFin"
                    	value="#{turnosAgendadosCtrl.fechaHasta}"
                        mindate="#{turnosAgendadosCtrl.fechaDesde}"
                        pattern="yyyy-MM-dd"  
                        required="true"
                        requiredMessage="#{etiquetas['nombre.fechoFin']} #{mensajes['requerido']}">
                    </p:datePicker>
                    <p:commandButton id="btnBuscar" value="#{etiquetas['buscar']}" 
                    	actionListener="#{turnosAgendadosCtrl.buscar}"
                    	update="dtbTurnosAgendados"/>
			</h:panelGrid>
			<p:dataTable id="dtbTurnosAgendados"
				value="#{turnosAgendadosCtrl.turno}"
				filteredValue="#{turnosAgendadosCtrl.filtro}" var="t" paginator="true"
				rows="25" style="margin-bottom:20px"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {Exporters}">
				<f:facet name="{Exporters}">
	            	<div style="float:right;">
		                <h:commandLink>
		                    <p:graphicImage value="/resource/images/excel.png" width="24"/>
		                    <p:dataExporter type="xls" target="dtbTurnosAgendados" fileName="turnosAgendados" />
		                </h:commandLink>
		                <h:commandLink>
		                    <p:graphicImage value="/resource/images/pdf.png" width="24"/>
		                    <p:dataExporter type="pdf" target="dtbTurnosAgendados" fileName="turnosAgendados" preProcessor="#{turnosAgendadosCtrl.preProcessPDF}"/>
		                </h:commandLink>
		                <h:commandLink>
		                    <p:graphicImage value="/resource/images/csv.png" width="24"/>
		                    <p:dataExporter type="csv" target="dtbTurnosAgendados" fileName="turnosAgendados" />
		                </h:commandLink>
					</div>
				</f:facet>
				<p:column headerText="#{etiquetas['registro.mercantil']}" 
					width="25%">
					<h:outputText value="#{turnosAgendadosCtrl.registroSeleccionado.nombre}" style="font-size:x-small;" />
				</p:column>
				<p:column headerText="#{etiquetas['fecha']}" 
					sortBy="#{t.dia}"
					filterBy="#{t.dia}" 
					filterMatchMode="contains" 
					width="10%">
					<h:outputText value="#{t.dia}" />
				</p:column>
				<p:column headerText="#{etiquetas['hora']}" 
					sortBy="#{t.hora}"
					filterBy="#{t.hora}" 
					filterMatchMode="contains" 
					width="10%"
					style="font-size: 10pt;">
					<h:outputText value="#{t.hora}" />
				</p:column>
				<p:column headerText="#{etiquetas['cedula']}" 
					sortBy="#{t.cedula}"
					filterBy="#{t.cedula}" 
					filterMatchMode="contains" 
					width="10%">
					<h:outputText value="#{t.cedula}" />
				</p:column>
				<p:column headerText="#{etiquetas['nombre']}" 
					sortBy="#{t.nombre}"
					filterBy="#{t.nombre}" 
					filterMatchMode="contains" 
					width="20%">
					<h:outputText value="#{t.nombre}" style="font-size:x-small;"/>
				</p:column>
				<p:column headerText="#{etiquetas['correo.electronico']}" 
					sortBy="#{t.correoElectronico}"
					filterBy="#{t.correoElectronico}" 
					filterMatchMode="contains" 
					width="20%">
					<h:outputText value="#{t.correoElectronico}" style="font-size:x-small;"/>
				</p:column>
				<p:column headerText="#{etiquetas['celular']}" 
					sortBy="#{t.celular}"
					filterBy="#{t.celular}" 
					filterMatchMode="contains" 
					width="10%"
					style="font-size: 10pt;">
					<h:outputText value="#{t.celular}" />
				</p:column>
			</p:dataTable>
		</h:form>
	</ui:define>
</ui:composition>
</html>